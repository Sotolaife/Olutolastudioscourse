{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the OLÚTỌ́LÁ Studios course platform.",
      "properties": {
        "user_id": {
          "type": "string",
          "description": "Auto-generated unique user ID."
        },
        "full_name": {
          "type": "string",
          "description": "Student's full name."
        },
        "email": {
          "type": "string",
          "description": "Email address used for login and communication.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "Optional phone number for Telegram verification."
        },
        "progress": {
          "type": "object",
          "description": "Tracks lessons completed by the user."
        },
        "devices": {
          "type": "array",
          "description": "List of device IDs used to access the platform (limit to 2).",
          "items": {
            "type": "string"
          }
        },
        "payment_status": {
          "type": "string",
          "description": "Payment status of the user ('pending', 'active', or 'expired').",
          "enum": [
            "pending",
            "active",
            "expired"
          ]
        },
        "join_date": {
          "type": "string",
          "description": "Date when the user enrolled.",
          "format": "date-time"
        },
        "last_login": {
          "type": "string",
          "description": "Last login timestamp.",
          "format": "date-time"
        },
        "role": {
          "type": "string",
          "description": "Role of the user ('student' or 'admin').",
          "enum": [
            "student",
            "admin"
          ]
        }
      },
      "required": [
        "user_id",
        "full_name",
        "email",
        "payment_status",
        "join_date",
        "last_login",
        "role"
      ]
    },
    "Course": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Course",
      "type": "object",
      "description": "Represents a course offered on the OLÚTỌ́LÁ Studios platform.",
      "properties": {
        "course_id": {
          "type": "string",
          "description": "Unique course identifier."
        },
        "title": {
          "type": "string",
          "description": "Title of the course (e.g., 'Becoming a Professional Video Editor')."
        },
        "description": {
          "type": "string",
          "description": "Short description of the course."
        },
        "thumbnail": {
          "type": "string",
          "description": "URL of the course thumbnail image (Firebase Storage or CDN)."
        },
        "price": {
          "type": "number",
          "description": "Price of the course."
        },
        "status": {
          "type": "string",
          "description": "Status of the course ('published' or 'draft').",
          "enum": [
            "published",
            "draft"
          ]
        },
        "category": {
          "type": "string",
          "description": "Category of the course (e.g., 'Design', 'Branding')."
        },
        "modules": {
          "type": "array",
          "description": "List of lesson IDs (references to Lesson).",
          "items": {
            "type": "string"
          }
        },
        "created_at": {
          "type": "string",
          "description": "Date when the course was created.",
          "format": "date-time"
        },
        "updated_at": {
          "type": "string",
          "description": "Date when the course was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "course_id",
        "title",
        "description",
        "thumbnail",
        "price",
        "status",
        "category",
        "created_at",
        "updated_at"
      ]
    },
    "Lesson": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Lesson",
      "type": "object",
      "description": "Represents a lesson within a course.",
      "properties": {
        "lesson_id": {
          "type": "string",
          "description": "Unique identifier for the lesson entity."
        },
        "course_id": {
          "type": "string",
          "description": "Reference to the parent course."
        },
        "title": {
          "type": "string",
          "description": "Title of the lesson (e.g., 'Introduction to Branding')."
        },
        "video_url": {
          "type": "string",
          "description": "URL of the YouTube embed link for the lesson."
        },
        "resources": {
          "type": "array",
          "description": "List of downloadable resources (PDFs, templates).",
          "items": {
            "type": "string"
          }
        },
        "order": {
          "type": "number",
          "description": "Order of the lesson within the course (1, 2, 3...)."
        },
        "description": {
          "type": "string",
          "description": "Summary of the lesson content."
        },
        "duration": {
          "type": "string",
          "description": "The length of the lesson (e.g., '15 mins')."
        },
        "status": {
          "type": "string",
          "description": "Status of the lesson ('active' or 'hidden').",
          "enum": [
            "active",
            "hidden"
          ]
        },
        "created_at": {
          "type": "string",
          "description": "Date when the lesson was created.",
          "format": "date-time"
        }
      },
      "required": [
        "lesson_id",
        "course_id",
        "title",
        "video_url",
        "order",
        "description",
        "status",
        "created_at"
      ]
    },
    "Payment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Payment",
      "type": "object",
      "description": "Represents a payment transaction made by a user for a course.",
      "properties": {
        "payment_id": {
          "type": "string",
          "description": "Unique identifier for the payment transaction."
        },
        "user_id": {
          "type": "string",
          "description": "Reference to the paying user."
        },
        "course_id": {
          "type": "string",
          "description": "Reference to the purchased course."
        },
        "amount": {
          "type": "number",
          "description": "Amount paid for the course."
        },
        "method": {
          "type": "string",
          "description": "Payment method used (e.g., 'Paystack')."
        },
        "status": {
          "type": "string",
          "description": "Status of the payment ('successful', 'failed', 'pending').",
          "enum": [
            "successful",
            "failed",
            "pending"
          ]
        },
        "payment_date": {
          "type": "string",
          "description": "Date when the payment was made.",
          "format": "date-time"
        }
      },
      "required": [
        "payment_id",
        "user_id",
        "course_id",
        "amount",
        "method",
        "status",
        "payment_date"
      ]
    },
    "EmailTrigger": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "EmailTrigger",
      "type": "object",
      "description": "Represents an email trigger for automated emails.",
      "properties": {
        "type": {
          "type": "string",
          "description": "Type of email trigger ('welcome', 'progress', 'reminder').",
          "enum": [
            "welcome",
            "progress",
            "reminder"
          ]
        },
        "template_id": {
          "type": "string",
          "description": "Reference to the email template."
        },
        "trigger_time": {
          "type": "string",
          "description": "Event that triggers the email (e.g., 'onSignup', 'onCourseComplete')."
        }
      },
      "required": [
        "type",
        "template_id",
        "trigger_time"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "schema": {
            "$ref": "#/entities/User"
          },
          "description": "Stores user profiles."
        }
      },
      {
        "path": "/courses/{courseId}",
        "definition": {
          "schema": {
            "$ref": "#/entities/Course"
          },
          "description": "Stores course information."
        }
      },
      {
        "path": "/lessons/{lessonId}",
        "definition": {
          "schema": {
            "$ref": "#/entities/Lesson"
          },
          "description": "Stores lesson details."
        }
      },
      {
        "path": "/users/{userId}/payments/{paymentId}",
        "definition": {
          "schema": {
            "$ref": "#/entities/Payment"
          },
          "description": "Stores payment information for each user."
        }
      },
      {
        "path": "/email_triggers/{emailTriggerId}",
        "definition": {
          "schema": {
            "$ref": "#/entities/EmailTrigger"
          },
          "description": "Stores email trigger configurations."
        }
      }
    ]
  }
}